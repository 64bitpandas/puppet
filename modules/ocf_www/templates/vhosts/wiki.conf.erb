# Legacy redirects for wiki.ocf.berkeley.edu -> ocfweb
<VirtualHost *:443>
    ServerName wiki.ocf.berkeley.edu
    ServerAdmin help@ocf.berkeley.edu

    SSLEngine on
	SSLCertificateFile /etc/ssl/private/<%= @fqdn %>.crt
	SSLCertificateKeyFile /etc/ssl/private/<%= @fqdn %>.key
	SSLCertificateChainFile /etc/ssl/certs/incommon-intermediate.crt
    Include ssl-common.conf

    RewriteEngine on
    RewriteRule ^/(.*)$ https://www.ocf.berkeley.edu/docs/$1 [R=301]

    Header set Strict-Transport-Security "max-age=31536000"
</VirtualHost>

# redirect http aliases to https version so we can enable HSTS (for next time)
<VirtualHost *:80>
    ServerName wiki.ocf.berkeley.edu
    ServerAdmin help@ocf.berkeley.edu

    Redirect 301 / https://wiki.ocf.berkeley.edu/
</VirtualHost>
