<VirtualHost *:443>
    ServerName ocf.io
    ServerAdmin help@ocf.berkeley.edu

    SSLEngine on
    SSLCertificateFile /etc/ssl/private/ocf.io.crt
    SSLCertificateKeyFile /etc/ssl/private/ocf.io.key
    SSLCertificateChainFile /etc/ssl/certs/positivessl-intermediate.crt
    Include ssl-common.conf

    # short URLs
    RewriteEngine on
    RewriteRule ^/about$ https://www.ocf.berkeley.edu/OCF/ [R]
    RewriteRule ^/account$ https://wiki.ocf.berkeley.edu/services/account/ [R]
    RewriteRule ^/contact$ https://wiki.ocf.berkeley.edu/contact/ [R]
    RewriteRule ^/email-update$ http://status.ocf.berkeley.edu/2014/06/email-discontinuation-update-forward.html [R]
    RewriteRule ^/faq$ https://wiki.ocf.berkeley.edu/faq/ [R]
    RewriteRule ^/join$ https://accounts.ocf.berkeley.edu/request-account [R]
    RewriteRule ^/lab$ https://wiki.ocf.berkeley.edu/services/lab/ [R]
    RewriteRule ^/mon$ http://systemstatus.ocf.berkeley.edu/ [R]
    RewriteRule ^/password$ https://accounts.ocf.berkeley.edu/change-password [R]
    RewriteRule ^/rt$ https://rt.ocf.berkeley.edu/ [R]
    RewriteRule ^/ssh$ https://wiki.ocf.berkeley.edu/services/shell/ [R]
    RewriteRule ^/staff$ http://hello.ocf.berkeley.edu/ [R]
    RewriteRule ^/staff-hours$ https://www.ocf.berkeley.edu/staff_hours [R]
    RewriteRule ^/staff_hours$ http://ocf.io/staff-hours [R]
    RewriteRule ^/stats$ http://stats.ocf.berkeley.edu/ [R]
    RewriteRule ^/status$ http://status.ocf.berkeley.edu/ [R]
    RewriteRule ^/vhost$ https://wiki.ocf.berkeley.edu/services/vhost/ [R]
    RewriteRule ^/wiki$ https://wiki.ocf.berkeley.edu/ [R]
    RewriteRule ^/wordpress$ https://wiki.ocf.berkeley.edu/services/web/wordpress/ [R]
    RewriteRule ^/https$ http://status.ocf.berkeley.edu/2014/10/moving-wwwocfberkeleyedu-to-https-only.html [R]
    RewriteRule ^/apphost$ http://status.ocf.berkeley.edu/2014/10/announcing-dedicated-hosting-for-web.html [R]
    RewriteRule ^/mysql$ https://wiki.ocf.berkeley.edu/services/mysql/ [R]
    RewriteRule ^/hosting$ https://wiki.ocf.berkeley.edu/services/web/ [R]
    RewriteRule ^/web$ https://wiki.ocf.berkeley.edu/services/web/ [R]
    RewriteRule ^/oslapi$ https://studentservices.berkeley.edu/WebServices/StudentGroupServiceV2/Service.asmx/CalLinkOrganizations [R]

    Redirect / https://www.ocf.berkeley.edu/

    Header set Strict-Transport-Security "max-age=31536000"
</VirtualHost>

# redirect http aliases to https version so we can enable HSTS (for next time)
<VirtualHost *:80>
    ServerName ocf.io
    ServerAlias ocf.sexy open.cf
    ServerAdmin help@ocf.berkeley.edu

    Redirect 301 / https://ocf.io/
</VirtualHost>
